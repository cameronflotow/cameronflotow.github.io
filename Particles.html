
<!Doctype: HTML w/ Processing>

<html>

  <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>Processing Demo</title>
      <script type="text/javascript" src="js/processing.js"></script>
  </head>
  
  <body>
    <h1>Cameron Flotow</h1>
    <p>Morphogenesis</p>
    
    <script type="text/processing">
    




      ArrayList<Animal> A = new ArrayList<Animal>();
      int animalSize = 15;
      //9
      int averageR = 0;
      int averageG = 0;
      int averageB = 0;
      //P//image p_;
      //P//image table;

      void setup() {
        noStroke();
        //imageMode(CENTER);
        //size(600,600);
        //size(1400, 900);
        rectMode(CORNER);
        // fullScreen();
        textAlign(CENTER, CENTER);
        textSize(50);
        //table=load//image("https://static.wixstatic.com/media/e2a4a6_07ab718a0a324b5992f1b7d456388421~mv2.jpeg");
        //table.resize(width, height);
        //p_=load//image("https://static.wixstatic.com/media/e2a4a6_519cf889b0054a97a2f96340bb3b71ba~mv2.png");
        //p_.resize(height+60, height);

        for (int i = width/6; i < width-width/6; i+=animalSize) {
          for (int j = 100; j < height-100; j+=animalSize) {              //random(255), random(255), random(255)
            Animal a = new Animal(i, j, animalSize, random(100, 200), random(255), random(255), random(255), random(-.001, .001), floor(random(10)));
            A.add(a);
          }
        }
       // frameRate(5000);
      }


      void draw() {
        background(0);
        noStroke();
        averageR=0;

        averageB=0;
      pushMatrix();
      rotateX(.3);

        ////image(table, width/2, height/2);
        for (int i = 0; i < A.size(); i++) {
          A.get(i).show();
          averageR+=A.get(i).r;

          averageB+=A.get(i).b;



          //if((averageR+averageG+averageB)/3<125){
          //  fill(255);
          //}else{
          //  fill(0);
          //}

          //text(averageR+":"+averageG+":"+averageB,100,height-100);
        }
        popMatrix();

        averageR/=A.size();

        averageB/=A.size();
        //tint(255);
        ////image(p_,width/2,height/2);
        //tint(255);
        //fill(0);
        //noStroke();
        //rect(-1,-1,width/5.3,height+1);
        //rect(width-width/5.3,-1,width,height+1);
      }


      //void mouseReleased() {
      //  A.clear();
      //  for (int i = width/6; i < width-width/6; i+=animalSize) {
      //    for (int j = 100; j < height-100; j+=animalSize) {              //random(255), random(255), random(255)
      //      Animal a = new Animal(i, j, animalSize, random(100, 200), random(255), random(255), random(255), random(-.001, .001), floor(random(10)));
      //      A.add(a);
      //    }
      //  }
      //}

      class Animal {

        int x; 
        int y; 
        int w; 
        float fitness; 
        float r; 
        float g; 
        float b; 
        float repCount;
        float storeRepCount;
        int which;
        public Animal(int x, int y, int w, float fitness, float r, float g, float b, float repCount, int which) {
          this.x=x; 
          this.y=y; 
          this.w=w; 
          this.fitness=fitness; 
          this.r=r; 
          this.g=g; 
          this.b=b; 
          this.repCount = repCount;
          storeRepCount = repCount;
          this.which=which;
        }


        void show() {

          //&&r+g+b>150
          //major mutation
          if (random(100000)<1000) {

            r=r+random(-6, 6);
            g=g+random(-6, 6);
            b=b+random(-6, 6);
            fitness=fitness+random(5);
          }

          if (random(100000)<2) {

            r=255-r;
            g=255-g;
            b=255-b;
            fitness=fitness+random(11);
          }
          if (random(100000)<1) {


            fitness=fitness+random(15);
          } 
          // major mutation
          if (random(9999999)<10) {
            fitness-=100;
          }

          //if(random(999999)<30){
          //  r=0;g=0;b=0;
          //  fitness+=1;
          //}

          if (r>255) {
            r=255;
          }
          if (g>255) {
            g=255;
          }
          if (b>255) {
            b=255;
          }
          if (r<0) {
            r=0;
          }
          if (g<0) {
            g=0;
          }
          if (b<0) {
            b=0;
          }
          fill(r, g, b);

          noStroke();
          rect(x, y, w, w);
          //if (dist(x+(w/2), y+(w/2), mouseX, mouseY)<animalSize/2) {
          //  text("Fitness: "+floor(fitness), width/2, height-50);
          //  noFill();
          //  stroke(255);
          //  rect(x, y, w, w);
          //  noStroke();
          //}
          repCount--;
          //reproduce();
          if (repCount<0) {
            reproduce();
            repCount = storeRepCount;
          }
        }


        void reproduce() {
          //minor mutation
          int rando = floor(random(10));
          if (rando==0) {
            for (int i = 0; i < A.size(); i++) {
              if (A.get(i).x+animalSize == x && A.get(i).y == y) {
                if (A.get(i).fitness<fitness) {
                  A.get(i).r=r+random(-1, 1);
                  A.get(i).g=g+random(-1, 1);
                  A.get(i).b=b+random(-1, 1);
                  A.get(i).fitness=fitness+random(-1, 1);
                  A.get(i).repCount=repCount+random(-1, 1);
                  A.get(i).repCount = storeRepCount+random(-1, 1);
                  A.get(i).storeRepCount = storeRepCount+random(-1, 1);
                  A.get(i).which=which;
                }
              }
            }
          } else if (rando==1) {
            for (int i = 0; i < A.size(); i++) {
              if (A.get(i).x-animalSize == x && A.get(i).y == y) {
                if (A.get(i).fitness<fitness) {
                  A.get(i).r=r+random(-1, 1);
                  A.get(i).g=g+random(-1, 1);
                  A.get(i).b=b+random(-1, 1);
                  A.get(i).fitness=fitness+random(-1, 1);
                  A.get(i).repCount=repCount+random(-1, 1);
                  A.get(i).repCount = storeRepCount+random(-1, 1);
                  A.get(i).storeRepCount = storeRepCount+random(-1, 1);
                  A.get(i).which=which;
                }
              }
            }
          } else if (rando==2) {
            for (int i = 0; i < A.size(); i++) {
              if (A.get(i).x == x && A.get(i).y+animalSize == y) {
                if (A.get(i).fitness<fitness) {
                  A.get(i).r=r+random(-1, 1);
                  A.get(i).g=g+random(-1, 1);
                  A.get(i).b=b+random(-1, 1);
                  A.get(i).fitness=fitness+random(-1, 1);
                  A.get(i).repCount=repCount+random(-1, 1);
                  A.get(i).repCount = storeRepCount+random(-1, 1);
                  A.get(i).storeRepCount = storeRepCount+random(-1, 1);
                  A.get(i).which=which;
                }
              }
            }
          } else if (rando==3) {
            for (int i = 0; i < A.size(); i++) {
              if (A.get(i).x == x && A.get(i).y-animalSize == y) {
                if (A.get(i).fitness<fitness) {
                  A.get(i).r=r+random(-1, 1);
                  A.get(i).g=g+random(-1, 1);
                  A.get(i).b=b+random(-1, 1);
                  A.get(i).fitness=fitness+random(-1, 1);
                  A.get(i).repCount=repCount+random(-1, 1);
                  A.get(i).repCount = storeRepCount+random(-1, 1);
                  A.get(i).storeRepCount = storeRepCount+random(-1, 1);
                  A.get(i).which=which;
                }
              }
            }
          }
        }
      }






    </script>
    <canvas id="sketch" style="border: 1px solid black;"></canvas>
    
  </body>
  
</html>
